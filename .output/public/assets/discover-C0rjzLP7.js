import{c as p,r as i,a as u,j as e,S as C,L as m}from"./index-5PltJSx_.js";import{a as x}from"./api-Df4qyv35.js";import{w as A}from"./auth-BhrcrAHN.js";import{M as L}from"./map-pin-DKGBZGve.js";const I=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],P=p("briefcase",I);const M=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],k=p("funnel",M);function B(){const[l,h]=i.useState(""),[a,g]=i.useState("all"),[n,f]=i.useState(""),[o,v]=i.useState(""),j=u(x.posts.listPosts,{}),c=u(x.services.listServices,{}),N=["Abra","Agusan del Norte","Agusan del Sur","Aklan","Albay","Antique","Apayao","Aurora","Basilan","Bataan","Batanes","Batangas","Benguet","Biliran","Bohol","Bukidnon","Bulacan","Cagayan","Camarines Norte","Camarines Sur","Camiguin","Capiz","Catanduanes","Cavite","Cebu","Cotabato","Davao del Norte","Davao del Sur","Davao de Oro","Davao Occidental","Dinagat Islands","Eastern Samar","Guimaras","Ifugao","Ilocos Norte","Ilocos Sur","Ilocos Norte","Ilocos Sur","Isabela","Kalinga","Laguna","Lanao del Norte","Lanao del Sur","La Union","Leyte","Maguindanao","Marinduque","Masbate","Mindoro Occidental","Mindoro Oriental","Misamis Occidental","Misamis Oriental","Mountain Province","Negros Occidental","Negros Oriental","Northern Samar","Nueva Ecija","Nueva Vizcaya","Palawan","Pampanga","Pangasinan","Quezon","Quirino","Rizal","Romblon","Sarangani","Siquijor","Sorsogon","South Cotabato","Southern Leyte","Sultan Kudarat","Sulu","Surigao del Norte","Surigao del Sur","Tarlac","Tawi-Tawi","Zambales","Zambales Norte","Zambales del Sur","Zamboanga del Norte","Zamboanga Sibugay","Zamboanga del Sur"],b=c?Array.from(new Set(c.map(s=>s.category))):[],r=(()=>{const s=l.toLowerCase(),y=(j??[]).filter(t=>t.caption.toLowerCase().includes(s)||t.tags.some(w=>w.toLowerCase().includes(s))),S=(c??[]).filter(t=>(n?t.category===n:!0)&&(o?t.location.includes(o):!0)&&(t.title.toLowerCase().includes(s)||t.description.toLowerCase().includes(s)));return{posts:a==="all"||a==="posts"?y:[],services:a==="all"||a==="services"?S:[]}})(),d=r.posts.length+r.services.length;return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Discover"}),e.jsxs("div",{className:"bg-card border rounded-lg p-6 mb-8",children:[e.jsx("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(C,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx("input",{type:"text",placeholder:"Search posts or services...",value:l,onChange:s=>h(s.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary"})]})}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("select",{value:a,onChange:s=>g(s.target.value),className:"border rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"posts",children:"Posts"}),e.jsx("option",{value:"services",children:"Services"})]})]}),a==="all"||a==="services"?e.jsxs(e.Fragment,{children:[e.jsxs("select",{value:n,onChange:s=>f(s.target.value),className:"border rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"",children:"All Categories"}),b.map(s=>e.jsx("option",{value:s,children:s},s))]}),e.jsxs("select",{value:o,onChange:s=>v(s.target.value),className:"border rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"",children:"All Provinces"}),N.map(s=>e.jsx("option",{value:s,children:s},s))]})]}):null]})]}),l||n||o?e.jsxs("p",{className:"text-muted-foreground mb-4",children:["Found ",d," result",d!==1?"s":""]}):null,e.jsxs("div",{className:"space-y-8",children:[r.posts.length>0&&(a==="all"||a==="posts")&&e.jsxs("section",{children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:["Posts (",r.posts.length,")"]}),e.jsx("div",{className:"grid gap-4",children:r.posts.map(s=>e.jsxs(m,{to:"/post/$postId",params:{postId:s._id},className:"bg-card border rounded-lg p-6 hover:border-primary/50 transition-colors cursor-pointer block",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary flex items-center justify-center text-white font-semibold",children:s.userId.substring(0,2)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"User"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:new Date(s.createdAt).toLocaleDateString()})]})]})}),e.jsx("p",{className:"mb-4 whitespace-pre-wrap",children:s.caption}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("span",{children:[s.likesCount," Likes"]}),e.jsxs("span",{children:[s.commentsCount," Comments"]})]})]},s._id))})]}),r.services.length>0&&(a==="all"||a==="services")&&e.jsxs("section",{children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(P,{className:"h-5 w-5"}),"Services (",r.services.length,")"]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.services.map(s=>e.jsxs(m,{to:"/service/$serviceId",params:{serviceId:s._id},className:"bg-card border rounded-lg p-4 hover:border-primary/50 transition-colors cursor-pointer block",children:[e.jsx("h3",{className:"font-semibold mb-2",children:s.title}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"font-medium",children:["â‚±",s.pricePerHour,"/hr"]}),e.jsx("span",{className:"text-muted-foreground",children:s.category})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-1 text-sm text-muted-foreground",children:[e.jsx(L,{className:"h-4 w-4"}),e.jsx("span",{className:"truncate",children:s.location})]})]},s._id))})]}),d===0&&(l||n||o)&&e.jsx("div",{className:"text-center py-12 text-muted-foreground",children:e.jsx("p",{children:"No results found. Try adjusting your search or filters."})}),!l&&!n&&!o&&e.jsx("div",{className:"text-center py-12 text-muted-foreground",children:e.jsx("p",{children:"Use the search bar and filters to discover content"})})]})]})})}const Z=A(B);export{Z as component};
