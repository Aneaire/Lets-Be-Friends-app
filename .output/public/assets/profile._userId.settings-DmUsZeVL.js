import{p as X,u as A,a as B,r as t,d as E,j as e,L as F}from"./index-5PltJSx_.js";import{a as j}from"./api-Df4qyv35.js";import{a as M,S as V}from"./ImageUpload-Zk7bMy51.js";import{A as G}from"./arrow-left-C7m3PQ5f.js";function Q(){const{userId:c}=X.useParams(),{userId:n}=A(),a=B(j.users.getCurrentUser,{clerkId:n??""}),[d,v]=t.useState(a?.username??""),[o,y]=t.useState(a?.fullName??""),[u,N]=t.useState(a?.bio??""),[m,S]=t.useState(a?.phoneNumber??""),[x,w]=t.useState(a?.birthday??""),[p,k]=t.useState(a?.gender??""),[f,P]=t.useState(a?.location??""),[r,C]=t.useState(a?.avatarUrl??""),[h,I]=t.useState(a?.isLocationVisible??!1),[g,b]=t.useState(!1),[i,l]=t.useState(""),U=E(j.users.updateUserProfile);if(!a||a._id!==c)return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"max-w-4xl mx-auto text-center",children:e.jsx("p",{children:"You can only edit your own profile."})})});const L=async()=>{if(n){b(!0),l("");try{await U({clerkId:n,username:d,fullName:o,bio:u,phoneNumber:m,birthday:x,gender:p,location:f,avatarUrl:r,isLocationVisible:h}),l("Profile updated successfully!"),setTimeout(()=>{l("")},3e3)}catch{l("Failed to update profile. Please try again.")}finally{b(!1)}}};return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsxs(F,{to:"/profile/$userId",params:{userId:c},className:"inline-flex items-center gap-2 text-muted-foreground hover:text-foreground transition-colors",children:[e.jsx(G,{className:"h-5 w-5"}),"Back to Profile"]})}),e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Edit Profile"}),e.jsxs("div",{className:"bg-card border rounded-lg p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"flex-shrink-0",children:r?e.jsx("img",{src:r,alt:"Avatar",className:"w-24 h-24 rounded-full object-cover"}):e.jsx("div",{className:"w-24 h-24 rounded-full bg-primary flex items-center justify-center text-white font-semibold text-3xl",children:o.substring(0,2)})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Profile Picture"}),e.jsx(M,{defaultImage:r,onImageChange:s=>C(s??"")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Username"}),e.jsx("input",{type:"text",value:d,onChange:s=>v(s.target.value),className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Enter your username"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Full Name"}),e.jsx("input",{type:"text",value:o,onChange:s=>y(s.target.value),className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Enter your full name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Bio"}),e.jsx("textarea",{value:u,onChange:s=>N(s.target.value),className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary min-h-[100px]",placeholder:"Tell us about yourself..."})]}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Phone Number"}),e.jsx("input",{type:"tel",value:m,onChange:s=>S(s.target.value),className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"09XX XXX XXXX"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Birthday"}),e.jsx("input",{type:"date",value:x,onChange:s=>w(s.target.value),className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Gender"}),e.jsxs("select",{value:p,onChange:s=>k(s.target.value),className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"",children:"Select gender"}),e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"}),e.jsx("option",{value:"other",children:"Other"}),e.jsx("option",{value:"prefer-not-to-say",children:"Prefer not to say"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Location"}),e.jsx("input",{type:"text",value:f,onChange:s=>P(s.target.value),className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"City, Province"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",id:"isLocationVisible",checked:h,onChange:s=>I(s.target.checked),className:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"}),e.jsx("label",{htmlFor:"isLocationVisible",className:"text-sm",children:"Make my location visible to other users"})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsxs("button",{onClick:L,disabled:g,className:"w-full bg-primary text-primary-foreground px-4 py-3 rounded-md font-medium hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[e.jsx(V,{className:"h-4 w-4"}),g?"Saving...":"Save Changes"]}),i&&e.jsx("p",{className:`mt-2 text-sm text-center ${i.includes("success")?"text-green-600":"text-red-600"}`,children:i})]})]})]})})}export{Q as component};
