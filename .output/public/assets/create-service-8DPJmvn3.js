import{u as Q,b as V,a as X,r as t,d as _,j as e}from"./index-5PltJSx_.js";import{a as A}from"./api-Df4qyv35.js";import{X as D,I as z,S as J}from"./ImageUpload-Zk7bMy51.js";import{A as Y}from"./arrow-left-C7m3PQ5f.js";import{P as M}from"./plus-BlFsALoN.js";function re(){const{userId:f}=Q(),v=V(),y=X(A.users.getCurrentUser,{clerkId:f??""}),[u,q]=t.useState(""),[m,E]=t.useState(""),[p,H]=t.useState(""),[x,R]=t.useState(""),[g,U]=t.useState(""),[a,b]=t.useState([]),[n,j]=t.useState(""),[i,N]=t.useState([]),[l,S]=t.useState(""),[o,C]=t.useState(""),[c,w]=t.useState(""),[k,$]=t.useState([]),[P,T]=t.useState(!1),[h,r]=t.useState(""),F=_(A.services.createService),L=["Photography","Videography","Music & Audio","Event Planning","Catering","Cleaning","Moving","Personal Training","Tutoring","Web Design","Graphic Design","Writing","Translation","Social Media","Consulting","Other"],W=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],I=()=>{n.trim()&&!a.includes(n.trim())&&(b([...a,n.trim()]),j(""))},B=s=>{b(a.filter(d=>d!==s))},G=()=>{if(l&&o&&c){const s=`${l} ${o}-${c}`;N([...i,s]),S(""),C(""),w("")}},K=s=>{N(i.filter(d=>d!==s))},O=async s=>{if(s.preventDefault(),!f||!y){r("Please log in to create a service");return}if(!u||!m||!p||!x||!g){r("Please fill in all required fields");return}T(!0),r("");try{await F({userId:y._id,title:u,description:m,category:p,pricePerHour:parseFloat(x),availability:i,location:g,tags:a,images:k}),r("Service created successfully!"),setTimeout(()=>{v.navigate({to:"/discover"})},1500)}catch{r("Failed to create service. Please try again.")}finally{T(!1)}};return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("button",{onClick:()=>v.navigate({to:"/discover"}),className:"inline-flex items-center gap-2 text-muted-foreground hover:text-foreground transition-colors",children:[e.jsx(Y,{className:"h-5 w-5"}),"Back to Discover"]})}),e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Create a Service"}),e.jsxs("form",{onSubmit:O,className:"bg-card border rounded-lg p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Service Title ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:u,onChange:s=>q(s.target.value),className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"E.g., Professional Photography",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Description ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:m,onChange:s=>E(s.target.value),className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary min-h-[150px]",placeholder:"Describe your service in detail...",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Category ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:p,onChange:s=>H(s.target.value),className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary",required:!0,children:[e.jsx("option",{value:"",children:"Select a category"}),L.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Price per Hour (â‚±) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:x,onChange:s=>R(s.target.value),min:"0",step:"0.01",className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"500",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Location ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:g,onChange:s=>U(s.target.value),className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"City, Province",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tags"}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("input",{type:"text",value:n,onChange:s=>j(s.target.value),onKeyPress:s=>s.key==="Enter"&&(s.preventDefault(),I()),className:"flex-1 px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Add a tag..."}),e.jsx("button",{type:"button",onClick:I,className:"bg-primary text-primary-foreground px-4 py-2 rounded-md hover:bg-primary/90 transition-colors",children:e.jsx(M,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.map(s=>e.jsxs("span",{className:"bg-primary/10 text-primary px-3 py-1 rounded-full text-sm flex items-center gap-2",children:[s,e.jsx("button",{type:"button",onClick:()=>B(s),className:"hover:text-red-500",children:e.jsx(D,{className:"h-3 w-3"})})]},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Availability"}),e.jsxs("div",{className:"grid sm:grid-cols-3 gap-2 mb-3",children:[e.jsxs("select",{value:l,onChange:s=>S(s.target.value),className:"px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"",children:"Select day"}),W.map(s=>e.jsx("option",{value:s,children:s},s))]}),e.jsx("input",{type:"time",value:o,onChange:s=>C(s.target.value),className:"px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary"}),e.jsx("input",{type:"time",value:c,onChange:s=>w(s.target.value),className:"px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary"})]}),e.jsxs("button",{type:"button",onClick:G,disabled:!l||!o||!c,className:"w-full sm:w-auto bg-muted px-4 py-2 rounded-md hover:bg-muted/80 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(M,{className:"h-4 w-4 inline mr-2"}),"Add Availability"]}),e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:i.map(s=>e.jsxs("span",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm flex items-center gap-2",children:[s,e.jsx("button",{type:"button",onClick:()=>K(s),className:"hover:text-red-600",children:e.jsx(D,{className:"h-3 w-3"})})]},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Service Images"}),e.jsx(z,{maxImages:5,onImagesChange:$,defaultImages:k})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsxs("button",{type:"submit",disabled:P,className:"w-full bg-primary text-primary-foreground px-4 py-3 rounded-md font-medium hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[e.jsx(J,{className:"h-4 w-4"}),P?"Creating...":"Create Service"]}),h&&e.jsx("p",{className:`mt-2 text-sm text-center ${h.includes("success")?"text-green-600":"text-red-600"}`,children:h})]})]})]})})}export{re as component};
