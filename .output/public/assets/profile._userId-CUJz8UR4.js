import{c as i,h as N,u as w,a,d as x,j as e,L as u}from"./index-5PltJSx_.js";import{a as r}from"./api-Df4qyv35.js";import{M as v}from"./map-pin-DKGBZGve.js";import{C as y}from"./calendar-DGhMDcJ7.js";import{H as b}from"./heart-bZLsMFrj.js";import{M as k}from"./message-circle-B0O43-wu.js";const U=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],I=i("settings",U);const _=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],F=i("user-minus",_);const C=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],M=i("user-plus",C);const P=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],$=i("user",P);function R(){const{userId:s}=N.useParams(),{userId:f}=w(),o=a(r.users.getCurrentUser,{clerkId:f??""}),l=a(r.users.getUser,{userId:s}),n=a(r.follows.getFollowCount,{userId:s}),h=a(r.follows.isFollowing,{followerId:o?._id??"",followingId:s}),t=a(r.posts.listPostsByUser,{userId:s}),g=x(r.follows.followUser),p=x(r.follows.unfollowUser),d=o?._id===s,c=h??!1,j=()=>{o&&(c?p({followerId:o._id,followingId:s}):g({followerId:o._id,followingId:s}))};return l?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"bg-card border rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsx("div",{className:"flex-shrink-0",children:l.avatarUrl?e.jsx("img",{src:l.avatarUrl,alt:l.fullName,className:"w-32 h-32 rounded-full object-cover"}):e.jsx("div",{className:"w-32 h-32 rounded-full bg-primary flex items-center justify-center text-white font-semibold text-4xl",children:l.fullName.substring(0,2)})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h1",{className:"text-2xl font-bold",children:l.username||l.fullName}),l.isVerified&&e.jsx("span",{className:"bg-blue-500 text-white text-xs px-2 py-0.5 rounded-full",children:"Verified"})]}),e.jsx("p",{className:"text-muted-foreground",children:l.fullName})]}),!d&&o&&e.jsx("button",{onClick:j,className:`flex items-center gap-2 px-4 py-2 rounded-md font-medium transition-colors ${c?"bg-muted text-foreground hover:bg-muted/80":"bg-primary text-primary-foreground hover:bg-primary/90"}`,children:c?e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"h-4 w-4"}),"Unfollow"]}):e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"h-4 w-4"}),"Follow"]})}),d&&e.jsxs(u,{to:"/profile/$userId/settings",params:{userId:s},className:"flex items-center gap-2 px-4 py-2 rounded-md font-medium bg-muted text-foreground hover:bg-muted/80 transition-colors",children:[e.jsx(I,{className:"h-4 w-4"}),"Edit Profile"]})]}),l.bio&&e.jsx("p",{className:"mb-4 whitespace-pre-wrap",children:l.bio}),e.jsxs("div",{className:"flex flex-wrap gap-6 text-sm",children:[n&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"font-semibold",children:n.following}),e.jsx("span",{className:"text-muted-foreground",children:"Following"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"font-semibold",children:n.followers}),e.jsx("span",{className:"text-muted-foreground",children:"Followers"})]})]}),l.location&&e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(v,{className:"h-4 w-4"}),e.jsx("span",{children:l.location})]})]}),e.jsx("div",{className:"mt-4 text-sm text-muted-foreground",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(y,{className:"h-4 w-4"}),e.jsxs("span",{children:["Joined ",new Date(l.createdAt).toLocaleDateString()]})]})})]})]})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:["Posts (",t?.length??0,")"]}),!t||t.length===0?e.jsxs("div",{className:"bg-card border rounded-lg p-12 text-center",children:[e.jsx($,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"No posts yet."})]}):e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(m=>e.jsx(H,{post:m},m._id))})]})]})}):e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"max-w-4xl mx-auto text-center",children:e.jsx("p",{children:"Loading profile..."})})})}function H({post:s}){return e.jsxs(u,{to:"/post/$postId",params:{postId:s._id},className:"bg-card border rounded-lg overflow-hidden hover:border-primary/50 transition-colors cursor-pointer block",children:[s.images.length>0&&e.jsx("img",{src:`/api/storage/${s.images[0]}`,alt:"Post image",className:"w-full h-48 object-cover"}),e.jsxs("div",{className:"p-4",children:[e.jsx("p",{className:"mb-3 line-clamp-2",children:s.caption}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(b,{className:"h-4 w-4"}),e.jsx("span",{children:s.likesCount})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(k,{className:"h-4 w-4"}),e.jsx("span",{children:s.commentsCount})]})]})]})]})}export{R as component};
